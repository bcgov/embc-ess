<div class="mb-4">
  <h1>Tasks</h1>
  <p>Use this section to add new ESS users, as well as edit existing user information and permissions.</p>
  <h3 class="blue-header">TASK LIST</h3>

  <!-- <app-search-bar #searchBar (valueChange)="doSearch($event)" placeholder="Search for user by last name &#8230;">
        </app-search-bar> -->

  <div role="search" class="form-row">
    <div class="col-md-9">
      <input #searchbox type="text" aria-label="search" class="form-control mb-2" placeholder="Search for user by last name &hellip;" (keydown.enter)="search(searchbox.value)">
    </div>
    <div class="col-md-3">
      <button class="btn btn-primary" (click)="search(searchbox.value)">Search</button>
    </div>
  </div>
  <div class="search-results mt-4">
    <div *ngIf="metaIncidentTasks && metaIncidentTasks.data.length>0; then searchResultsTable; else notFound"></div>
  </div>
  <!-- TODO: <a class="small" href="">advanced search</a> -->
  <!-- TODO: show icons for HOH, RESTRICTED FILE -->
  <!-- <pre>{{volunteers|json}}</pre> -->
</div>
<div>
  <!-- The start of the table stuff. -->

  <ng-template #searchResultsTable>
    <!-- <p> {{metaVolunteers.metadata.page*metaVolunteers.metadata.pageSize}} - {{metaVolunteers.metadata.pageSize}} of
            {{metaVolunteers.metadata.totalCount}} <span class="font-weight-bold">ACTIVE</span>
            volunteers
            <small class="ml-3">(<a href="">show deactivated</a>)</small>
          </p> -->
    <table class="table">
      <thead class="thead-light">
        <th scope="col">TASK NUMBER</th>
        <th scope="col">INCIDENT LOCATION</th>
        <!-- <th scope="col"># ASSOCIATED EVACUEES</th> -->
        <th scope="col">ACTION</th>
      </thead>
      <tbody>
        <tr *ngFor="let incidentTask of metaIncidentTasks.data">
          <td>{{incidentTask?.taskNumber}}</td>
          <td>{{incidentTask?.community?.name}}</td>
          <!-- <td>UNKNOWN</td> -->
          <td>
            <a [routerLink]="" (click)="routeTo(incidentTask.id)">Edit Task Details</a>
            <!-- TODO: action -->
            <!-- <a [routerLink]="" (click)="routeTo(incidentTask.id)">Edit Task Details</a> -->
          </td>
        </tr>
      </tbody>
    </table>
    <pre>{{metaIncidentTasks.data|json}}</pre>
  </ng-template>

  <ng-template #notFound>
    <p>
      {{notFoundMessage}}
    </p>
  </ng-template>

</div>