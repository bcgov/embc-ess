<p class="step h2">STEP 3 of 4</p>
<h1 class="mt-3">Review Details & Save</h1>
<p>
  Please confirm that all your details are correct by reading through the summary below. Don't forget to click "<b>SAVE</b>" at the bottom of the page.
</p>
<h2 class="blue-header h3">EVACUEE SUMMARY</h2>

<section>
  <h2 class="h3">Evacuee Information</h2>
  <ul class="summary">
    <li>
      <span class="name">Last Name:</span>
      <span class="value">{{registration?.headOfHousehold?.lastName}}</span>
    </li>
    <li>
      <span class="name">First Name:</span>
      <span class="value">{{registration?.headOfHousehold?.firstName}}</span>
    </li>
    <li>
      <span class="name">Initial:</span>
      <span class="value">{{registration?.headOfHousehold?.initials}}</span>
    </li>
    <li>
      <span class="name">Preferred Name:</span>
      <span class="value">{{registration?.headOfHousehold?.nickname}}</span>
    </li>
    <li>
      <span class="name">Gender:</span>
      <span class="value">{{genderOption(registration?.headOfHousehold?.gender)}}</span>
    </li>
    <li>
      <span class="name">Date of Birth:</span>
      <span class="value">{{registration?.headOfHousehold?.dob | date : 'MMM-dd-yyyy'}}</span>
    </li>
  </ul>

  <h2 *ngIf="registration?.headOfHousehold?.familyMembers?.length > 0" class="h3 mt-3">Evacuee Household Information</h2>
  <ul class="summary mt-4" *ngFor="let fm of registration?.headOfHousehold?.familyMembers">
    <li>
      <span class="name">Last Name:</span>
      <span class="value">{{fm?.lastName}}</span>
    </li>
    <li>
      <span class="name">First Name:</span>
      <span class="value">{{fm?.firstName}}</span>
    </li>
    <li>
      <span class="name">Initial:</span>
      <span class="value">{{fm?.initials}}</span>
    </li>
    <li>
      <span class="name">Gender:</span>
      <span class="value">{{genderOption(fm?.gender)}}</span>
    </li>
    <li>
      <span class="name">Date of Birth:</span>
      <span class="value">{{fm?.dob | date : 'MMM-dd-yyyy'}}</span>
    </li>
  </ul>

  <h2 class="h3">Primary Address &amp; Contact Details</h2>
  <ul class="summary">
    <ng-container *ngIf="isBcAddress(registration?.headOfHousehold?.primaryResidence); then content else other_content"></ng-container>
    <!-- BC Addresses -->
    <ng-template #content>
      <li>
        <span class="name">Apt/Suite/Building Number &amp; Street Address/PO Box:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.addressLine1}}</span>
      </li>
      <li>
        <span class="name">Community:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.community?.name}}</span>
      </li>
      <li>
        <span class="name">Province:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.province}}</span>
      </li>
      <li>
        <span class="name">Postal Code:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.postalCode}}</span>
      </li>
      <li>
        <span class="name">Country:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.country?.name }}</span>
      </li>
    </ng-template>
    <!-- Non-BC Addresses -->
    <ng-template #other_content>
      <li>
        <span class="name">Apt/Suite/Building Number &amp; Street Address/PO Box:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.addressLine1}}</span>
      </li>
      <li>
        <span class="name">City:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.city}}</span>
      </li>
      <li>
        <span class="name">Region/Province/State:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.province}}</span>
      </li>
      <li>
        <span class="name">Postal /ZIP Code:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.postalCode}}</span>
      </li>
      <li>
        <span class="name">Country/Region:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.country?.name }}</span>
      </li>
    </ng-template>
    <li>
      <span class="name">Telephone/Mobile:</span>
      <span class="value">
        <span *ngIf="hasPhoneNumber">{{registration?.headOfHousehold?.phoneNumber}}</span>
        <span *ngIf="!hasPhoneNumber">
          <i class="far fa-check-square"></i>&nbsp; I am not willing or able to provide a telephone/mobile number.
        </span>
      </span>
    </li>
    <li>
      <span class="name">Alternate Telephone/Mobile:</span>
      <span class="value">{{registration?.headOfHousehold?.phoneNumberAlt}}</span>
    </li>
    <li>
      <span class="name">Email Address:</span>
      <span class="value">
        <span *ngIf="hasEmail">{{registration?.headOfHousehold?.email}}</span>
        <span *ngIf="!hasEmail">
          <i class="far fa-check-square"></i>&nbsp; I am not willing or able to provide an email address.
        </span>
      </span>
    </li>
  </ul>

  <ng-container *ngIf="registration?.headOfHousehold?.mailingAddress">
    <h2 class="h3">Mailing Address</h2>
    <ul class="summary">
      <ng-container *ngIf="isBcAddress(registration?.headOfHousehold?.mailingAddress); then content else other_content">
      </ng-container>
      <!-- BC Addresses -->
      <ng-template #content>
        <li>
          <span class="name">Apt/Suite/Building Number &amp; Street Address/PO Box:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.addressLine1}}</span>
        </li>
        <li>
          <span class="name">Community:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.community?.name}}</span>
        </li>
        <li>
          <span class="name">Province:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.province}}</span>
        </li>
        <li>
          <span class="name">Postal Code:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.postalCode}}</span>
        </li>
        <li>
          <span class="name">Country:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.country?.name }}</span>
        </li>
      </ng-template>
      <!-- Non-BC Addresses -->
      <ng-template #other_content>
        <li>
          <span class="name">Apt/Suite/Building Number &amp; Street Address/PO Box:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.addressLine1}}</span>
        </li>
        <li>
          <span class="name">City:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.city}}</span>
        </li>
        <li>
          <span class="name">Region/Province/State:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.province}}</span>
        </li>
        <li>
          <span class="name">Postal /ZIP Code:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.postalCode}}</span>
        </li>
        <li>
          <span class="name">Country/Region:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.country?.name }}</span>
        </li>
      </ng-template>
    </ul>
  </ng-container>

  <h2 class="h3">Insurance Information</h2>
  <ul class="summary">
    <li>
      <span class="name">Do you have insurance?</span>
      <span class="value">{{insuranceOption(registration?.insuranceCode)}}</span>
    </li>
  </ul>

  <h2 class="h3">Additional Information</h2>
  <ul class="summary">
    <li>
      <span class="name">Food:</span>
      <span class="value">{{registration?.requiresFood | yesNo}}</span>
    </li>
    <li>
      <span class="name">Dietary Requirements:</span>
      <span class="value">{{registration?.dietaryNeeds | yesNo}}</span>
    </li>
    <li>
      <span class="name">Lodging:</span>
      <span class="value">{{registration?.requiresAccommodation | yesNo}}</span>
    </li>
    <li>
      <span class="name">Clothing:</span>
      <span class="value">{{registration?.requiresClothing | yesNo}}</span>
    </li>
    <li>
      <span class="name">Transportation:</span>
      <span class="value">{{registration?.requiresTransportation | yesNo}}</span>
    </li>
    <li>
      <span class="name">Incidentals:</span>
      <span class="value">{{registration?.requiresIncidentals | yesNo}}</span>
    </li>
    <li>
      <span class="name">Medication:</span>
      <span class="value">{{registration?.medicationNeeds | yesNo}}</span>
    </li>
    <li>
      <span class="name">Pets:</span>
      <span class="value">{{registration?.hasPets | yesNo}}</span>
    </li>
  </ul>
</section>

<h2 class="blue-header h3">USER VERIFICATION</h2>
<p>Please complete the CAPTCHA below. This helps us prevent automated registrations.</p>

<section class="mt-5 px-4 feature-block">
  <captcha language="en" eagerFetchAudio="true" (validToken)="onValidToken($event)" (serverError)="onServerError($event)"></captcha>
</section>

<div class="mt-5 space-between">
  <section>
    <button type="button" class="btn btn-outline-primary" (click)="back()">EDIT SELF-REGISTRATION</button>
  </section>
  <section>
    <a routerLink="/">
      <app-font-awesome-icon icon="times"></app-font-awesome-icon>
      <span class="ml-2">Cancel &amp; Close</span>
    </a>
    <button type="button" class="btn btn-primary ml-4" (click)="submit()" [disabled]="!captchaVerified || submitting">
      <span *ngIf="submitting">SUBMITTING</span>
      <span *ngIf="!submitting">SAVE &amp; SUBMIT</span>
    </button>
  </section>
</div>
