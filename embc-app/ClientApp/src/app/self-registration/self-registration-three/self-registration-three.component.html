<h2 class="step">STEP 3 of 4</h2>
<h1 class="mt-3">Review Details</h1>

<p>Please confirm that all details you entered are correct by reading through the summary below.</p>

<section class="p-3">
  <!-- <ul class="summary">
    <li>
      <span class="name">ESS File #:</span>
      <span class="value">{{registration?.essFileNumber}}</span>
    </li>
    <li [class.restricted]="registration.restrictedAccess">
      <span class="name">Restricted File:</span>
      <span class="value">{{registration?.restrictedAccess | yesNo}}</span>
    </li>
  </ul> -->
  <h3>Evacuee Information</h3>
  <ul class="summary">
    <li>
      <span class="name">Last Name:</span>
      <span class="value">{{registration?.headOfHousehold?.lastName}}</span>
    </li>
    <li>
      <span class="name">First Name:</span>
      <span class="value">{{registration?.headOfHousehold?.firstName}}</span>
    </li>
    <li>
      <span class="name">Initial:</span>
      <span class="value">{{registration?.headOfHousehold?.initials}}</span>
    </li>
    <li>
      <span class="name">Preferred Name:</span>
      <span class="value">{{registration?.headOfHousehold?.nickname}}</span>
    </li>
    <li>
      <span class="name">Gender:</span>
      <span class="value">{{genderOption(registration?.headOfHousehold?.gender)}}</span>
    </li>
    <li>
      <span class="name">Date of Birth:</span>
      <span class="value">{{registration?.headOfHousehold?.dob | date : 'MM/dd/yyyy'}}</span>
    </li>
  </ul>

  <h3 *ngIf="registration?.headOfHousehold?.familyMembers?.length > 0">Evacuee Family Information</h3>
  <ul class="summary" *ngFor="let fm of registration?.headOfHousehold?.familyMembers">
    <li>
      <span class="name">Last Name:</span>
      <span class="value">{{fm?.lastName}}</span>
    </li>
    <li>
      <span class="name">First Name:</span>
      <span class="value">{{fm?.firstName}}</span>
    </li>
    <li>
      <span class="name">Initial:</span>
      <span class="value">{{fm?.initials}}</span>
    </li>
    <li>
      <span class="name">Relationship:</span>
      <span class="value">{{fm?.relationshipToEvacuee?.description}}</span>
    </li>
    <li>
      <span class="name">Gender:</span>
      <span class="value">{{genderOption(fm?.gender)}}</span>
    </li>
    <li>
      <span class="name">Date of Birth:</span>
      <span class="value">{{fm?.dob | date : 'MM/dd/yyyy'}}</span>
    </li>
  </ul>

  <h3>Primary Address &amp; Contact Details</h3>
  <ul class="summary">
    <ng-container *ngIf="isBcAddress(registration?.headOfHousehold?.primaryResidence); then content else other_content">
    </ng-container>
    <!-- BC Addresses -->
    <ng-template #content>
      <li>
        <span class="name">Apt/Suite/Building Number &amp; Street Address/PO Box:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.addressLine1}}</span>
      </li>
      <li>
        <span class="name">Community:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.community?.name}}</span>
      </li>
      <li>
        <span class="name">Province:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.province}}</span>
      </li>
      <li>
        <span class="name">Postal Code:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.postalCode}}</span>
      </li>
      <li>
        <span class="name">Country:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.country?.name }}</span>
      </li>
    </ng-template>
    <!-- Non-BC Addresses -->
    <ng-template #other_content>
      <li>
        <span class="name">Apt/Suite/Building Number &amp; Street Address/PO Box:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.addressLine1}}</span>
      </li>
      <li>
        <span class="name">City:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.city}}</span>
      </li>
      <li>
        <span class="name">Region/Province/State:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.province}}</span>
      </li>
      <li>
        <span class="name">Postal /ZIP Code:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.postalCode}}</span>
      </li>
      <li>
        <span class="name">Country/Region:</span>
        <span class="value">{{registration?.headOfHousehold?.primaryResidence?.country?.name }}</span>
      </li>
    </ng-template>
    <li>
      <span class="name">Telephone/Mobile:</span>
      <span class="value">{{registration?.headOfHousehold?.phoneNumber}}</span>
    </li>
    <li>
      <span class="name">Alternate Telephone/Mobile:</span>
      <span class="value">{{registration?.headOfHousehold?.phoneNumberAlt}}</span>
    </li>
    <li>
      <span class="name">Email Address:</span>
      <span class="value">{{registration?.headOfHousehold?.email}}</span>
    </li>
  </ul>

  <ng-container *ngIf="registration?.headOfHousehold?.mailingAddress">
    <h3>Mailing Address</h3>
    <ul class="summary">
      <ng-container *ngIf="isBcAddress(registration?.headOfHousehold?.mailingAddress); then content else other_content">
      </ng-container>
      <!-- BC Addresses -->
      <ng-template #content>
        <li>
          <span class="name">Apt/Suite/Building Number &amp; Street Address/PO Box:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.addressLine1}}</span>
        </li>
        <li>
          <span class="name">Community:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.community?.name}}</span>
        </li>
        <li>
          <span class="name">Province:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.province}}</span>
        </li>
        <li>
          <span class="name">Postal Code:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.postalCode}}</span>
        </li>
        <li>
          <span class="name">Country:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.country?.name }}</span>
        </li>
      </ng-template>
      <!-- Non-BC Addresses -->
      <ng-template #other_content>
        <li>
          <span class="name">Apt/Suite/Building Number &amp; Street Address/PO Box:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.addressLine1}}</span>
        </li>
        <li>
          <span class="name">City:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.city}}</span>
        </li>
        <li>
          <span class="name">Region/Province/State:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.province}}</span>
        </li>
        <li>
          <span class="name">Postal /ZIP Code:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.postalCode}}</span>
        </li>
        <li>
          <span class="name">Country/Region:</span>
          <span class="value">{{registration?.headOfHousehold?.mailingAddress?.country?.name }}</span>
        </li>
      </ng-template>
    </ul>
  </ng-container>

  <h3>Additional Information</h3>
  <ul class="summary">
    <li>
      <span class="name">Dietary Requirements:</span>
      <span class="value">{{registration?.dietaryNeeds | yesNo}}</span>
    </li>
    <li>
      <span class="name">Medication:</span>
      <span class="value">{{registration?.medicationNeeds | yesNo}}</span>
    </li>
    <li>
      <span class="name">Pets:</span>
      <span class="value">{{registration?.hasPets | yesNo}}</span>
    </li>
  </ul>

  <h3>Insurance</h3>
  <ul class="summary">
    <li>
      <span class="name">Insurance:</span>
      <span class="value">{{insuranceOption(registration?.insuranceCode)}}</span>
    </li>
  </ul>
  <h3>Next Steps</h3>
  <ul class="summary">
    <li>
      <span class="name">Supports:</span>
      <span class="value">
        <div class="form-check mt-2">
          <input class="form-check-input" type="checkbox" disabled [checked]="registration?.requiresFood">
          <label class="form-check-label">Food</label>
        </div>
        <div class="form-check mt-2">
          <input class="form-check-input" type="checkbox" disabled [checked]="registration?.requiresClothing">
          <label class="form-check-label">Clothing</label>
        </div>
        <div class="form-check mt-2">
          <input class="form-check-input" type="checkbox" disabled [checked]="registration?.requiresAccommodation">
          <label class="form-check-label">Accommodation</label>
        </div>
        <div class="form-check mt-2">
          <input class="form-check-input" type="checkbox" disabled [checked]="registration?.requiresIncidentals">
          <label class="form-check-label">Incidentals</label>
        </div>
        <div class="form-check mt-2">
          <input class="form-check-input" type="checkbox" disabled [checked]="registration?.requiresTransportation">
          <label class="form-check-label">Transportation</label>
        </div>
      </span>
    </li>
  </ul>
</section>

<h3 class="blue-header">Collection Notice and Authorization</h3>
<section class="padded-section">
  <div class="row">
    <div class="form-check">
      <!-- <input class="form-check-input" type="checkbox" [formControl]="declarationAndConsent"> -->
      <label class="form-check-label">
        <p>Emergency Management BC (EMBC) will collect your personal information for the purpose of providing you with emergency services in accordance with section 26(c) of the Freedom of Information and Protection of Privacy Act (FoIPPA). EMBC will also collect the information as per section 26(e) of FoIPPA in order to evaluate the ESS program. Should you have any questions about the collection, use, or disclosure of personal information, please contact the ESS Call Centre Manager at PO Box 9201, STN PROV GOVT, Victoria, BC, V8W 9J1 or by phone toll free at 1-800-585-9559.</p>
        <p>By submitting your email address, you authorize the Emergency Management BC to communicate with you by email
          about your registration and to invite you to provide feedback about your experience.</p>
      </label>
    </div>
  </div>
</section>

<div class="mt-5 space-between">
  <section>
    <button type="button" class="btn btn-secondary" (click)="back()">EDIT SELF-REGISTRATION</button>
  </section>
  <section>
    <a routerLink="/dashboard">
      <app-font-awesome-icon icon="times"></app-font-awesome-icon>
      <span class="ml-2">Cancel &amp; Close</span>
    </a>
    <button type="button" class="btn btn-primary ml-4" (click)="submit()" [disabled]="submitting">
      <span *ngIf="submitting">SUBMITTING</span>
      <span *ngIf="!submitting">SAVE</span>
    </button>
  </section>
</div>
